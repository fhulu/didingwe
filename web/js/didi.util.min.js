(function(e){"use strict";var r={urlParam:function(r){var n=new RegExp("[\\?&]"+r+"=([^&#]*)").exec(e.location.href);return n[1]||0},sleep:function(e){var r=(new Date).getTime();for(var n=0;n<1e7;n++){if((new Date).getTime()-r>e){break}}},getQueryParams:function(e){e=e.split("+").join(" ");var r={},n,t=/[?&]?([^=]+)=([^&]*)/g;while(n=t.exec(e)){r[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}return r},jsonSize:function(e){var r=0;for(const n in e){if(e.hasOwnProperty(n))++r}return r},valid:function(e){return e!==null&&e!==undefined},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},toTitleCase:function(e){e=e.replace(/[_\/]/g," ");return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},getMatches:function(e,r,n){n||(n=1);var t=[];var i;while(i=r.exec(e)){t.push(i[n])}return t},assert:function(e,r){if(!e){r=r||"Assertion failed";console.log(r);if(typeof Error!=="undefined"){throw new Error(r)}throw r}},rgbToHex:function(e){if(e.substr(0,1)==="#"){return e}var r=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(e);if(!r)return e;var n=parseInt(r[2],10).toString(16);var t=parseInt(r[3],10).toString(16);var i=parseInt(r[4],10).toString(16);return"#"+((n.length==1?"0"+n:n)+(t.length==1?"0"+t:t)+(i.length==1?"0"+i:i))},darken:function(e,r){if(r<0)r=0;var n=e;if(n.substr(0,1)=="#"){n=n.substring(1)}if(n.length==3||n.length==6){var t=n.length/3;var i;var a=parseInt(n.substr(0,t),16);i=r*a/(256-a);a=Math.floor(256*i/(i+1));a=a.toString(16);if(a.length==1)a="0"+a;var f=parseInt(n.substr(t,t),16);i=r*f/(256-f);f=Math.floor(256*i/(i+1));f=f.toString(16);if(f.length==1)f="0"+f;var o=parseInt(n.substr(2*t,t),16);i=r*o/(256-o);o=Math.floor(256*i/(i+1));o=o.toString(16);if(o.length==1)o="0"+o;n=a+f+o}return"#"+n},isArray:e=>e&&e.constructor===Array,isPlainObject:e=>e&&e instanceof Object&&e.constructor===Object,isIterable:e=>dd.isArray(e)||dd.isPlainObject(e),appendArray:function(e,r){if(dd.isArray(e))e.push(r);else if(e)e=[e,r];else e=[r];return e},mergeArray:function(){var e=(e,r)=>r.forEach((r=>e.push(r)));while(arguments.length>1){e(arguments[0],arguments[1]);arguments.splice(1,1)}},deleteKeys:(e,r)=>{r.forEach((r=>delete e[r]));return e},indexOfKey:(e,r,n)=>{for(var t in e){var i=e[t];if(i[r]===n)return t}return-1},firstIndexOfKey:(e,r,n)=>dd.indexOfKey(e,r,n),lastIndexOfKey:function(e,r,n){var t=-1;for(var i in e){var a=e[i];if(a[r]===n)t=i}return t},merge:function(){let e=function(e,r){if(e===undefined||e===null)return r;if(r===undefined||r===null)return e;var n=dd.copy(e);for(var t in r){if(!r.hasOwnProperty(t))continue;var i=r[t];if(!e.hasOwnProperty(t)){n[t]=dd.copy(i);continue}var a=n[t];if(typeof a!==typeof i||dd.isArray(a)&&!dd.isArray(i)||dd.isPlainObject(a)&&!dd.isPlainObject(i)){n[t]=dd.copy(i);continue}if(dd.isArray(a)){if(i[0]=="_reset")n[t]=dd.copy(i.slice(1));else n[t]=[].concat(a).concat(i);continue}if(dd.isPlainObject(a))n[t]=dd.merge(a,i);else n[t]=dd.copy(i)}return n};let r=arguments[0];for(var n=1;n<arguments.length;n++){r=e(r,arguments[n])}return r},toObject:function(e){var r={};r[e]={};return r},firstElement:function(e){for(var r in e){if(!e.hasOwnProperty(r))continue;return[r,e[r]]}return undefined},firstValue:function(e){for(var r in e){if(!e.hasOwnProperty(r))continue;return e[r]}},firstKey:function(e){return this.firstElement(e)[0]},copy:function(e){if(e===undefined||dd.isAtomicValue(e))return e;var r=this;var n=()=>{var n=[];e.forEach((e=>n.push(r.copy(e))));return n};var t=()=>{var r={};for(const n in e){if(!e.hasOwnProperty(n))continue;r[n]=this.copy(e[n])}return r};return r.isArray(e)?n():t()},size:function(e){var r=0,n;for(n in e){if(e.hasOwnProperty(n))r++}return r},plainValues:function(e){var r={};for(var n in e){var t=e[n];if(dd.isPlainObject(t)||dd.isArray(t))continue;r[n]=t}return r},replaceVars:function(e,r,n){if(!n)n={};var t=arguments;var i=false;var a=this;var f=function(e){if(!a.isAtomicValue(e))return e;var r=dd.getMatches(e,/\$(\w+)/g);if(!r)return e;r.forEach((function(r){var a=n.sourceFirst?0:1;var f=t[a++];var o;if(f!==undefined)o=f[r];f=t[a%2];if(o===undefined||o===e&&f!==undefined)o=f[r];if(o===undefined)return;var u=e;e=e.replace(new RegExp("\\$"+r+"([^w]|\b|$)","g"),o+"$1");if(!i)i=e!=u}));return e};var o=function(t,i){i.forEach((function(f){if(!dd.isPlainObject(f))return;a.replaceVars(dd.merge({},e,r),f,n);i[t]=f}));return i};do{i=false;for(var u in r){if(dd.isArray(r.constants)&&r.constants.indexOf(u)>=0)continue;var s=r[u];if(dd.isArray(s))r[u]=o(u,s);else if(dd.isPlainObject(s)&&n.recurse)dd.replaceVars(dd.merge({},e,r),s,n);else r[u]=f(s)}}while(i&&n.recurse)},each:(e,r)=>{if(dd.isArray(e))return e.forEach(r);let n=Object.entries(e);for(const[e,t]of n){r(t,e,n)}return e},some:(e,r)=>{if(dd.isArray(e))return e.some(r);let n=Object.entries(e);for(const[e,t]of n){if(r(t,e,n))break}return e},replaceFields:function(e,r,n){if(typeof e!="string")return e;dd.each(r,(function(r,t){var i=n[t];if(i!==undefined)e=e.replace("$"+r,i)}));return e},replaceValues:function(e,r){for(var n in r){if(!r.hasOwnProperty(n))continue;e=e.replace("$"+n,r[n])}return e},visible:function(e){return!(e.hide||e.show===false)},walkTree:function(e,r,n){if(n===undefined)n=0;dd.each(e,(function(t,i){r(t,i,e,n);if(dd.isArray(t)||dd.isPlainObject(t))this.walkTree(t,r,n+1)}))},hasFlag:function(e,r){return e.indexOf(r)>=0},toIntValue:function(e,r){if(!(r in e))return false;var n=e[r];n=n==""?0:parseInt(n);if(isNaN(n))return false;e[r]=n;return true},getCSS:function(e){return this.loadLink(e,"css")},isNumeric:e=>{typeof e==="number"&&+e==e},escapeHtml:function(e,r,n){var t=e;if(r){if(typeof r=="string")r=r.split(" ");if(d.isNumeric(r[0])&&parseInt(r[0])==0)return t;r.map((function(e){t=t.replace(new RegExp("<(/?)"+e+"(/?)>","g"),"~~~$1"+e+"$2~~~")}))}if(n){if(typeof n=="string")n=n.split(" ");n.map((function(e){t=t.replace(new RegExp("<(/?)"+e+"(/?)>","g"),"&lt;$1"+e+"$2&gt;")}))}else{var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};t=t.replace(/[&<>"']/g,(function(e){return i[e]}))}if(r){r.map((function(e){t=t.replace(new RegExp("~~~(/?)"+e+"(/?)~~~","g"),"<$1"+e+"$2>")}))}return t},isAtomicValue:function(e){return typeof e=="string"||!isNaN(e)},removeXSS:function(e){var r=/<script(?:\s+[^>]*)?>.*<\/script>/;var n=function(e){var t=false;for(var i in e){var a=e[i];var f;if(dd.isArray(a)||dd.isPlainObject(a))n(e[i]);else if(typeof a=="string"&&(f=a.search(r))>=0){var o=a.match(r);e[i]=a.substr(0,f)+dd.escapeHtml(o[0])+a.substr(f+o[0].length);t=true}}if(t)n(e)};n(e)},debounce:function(e,r,n){var t;return function(){var i=this,a=arguments;var f=function(){t=null;if(!n)e.apply(i,a)};var o=n&&!t;clearTimeout(t);t=setTimeout(f,r);if(o)e.apply(i,a)}},selector:{id:function(e){return"#"+e},idName:function(e){return"#?,[name='?']".replace("?",e)},name:function(e){return"[name='?']".replace("?",e)},attr:function(e,r){return"$name='$value']".replace("$name",e).replace("$value",r)}},forEachMatch:(e,r,n)=>{var t,i=0;while(t=e.exec(r)){if(n(t,i++)===false)break}},extend:(e,r)=>dd.isArray(e)?e.concat(r):dd.merge(e,r)};if(e.didi===undefined||e.dd===undefined){e.didi=e.dd=r}})(window);