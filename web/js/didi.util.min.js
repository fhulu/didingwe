(function(r){"use strict";var e={urlParam:function(e){var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r.location.href);return n[1]||0},sleep:function(r){for(var e=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-e>r);n++);},getQueryParams:function(r){r=r.split("+").join(" ");for(var e,n={},t=/[?&]?([^=]+)=([^&]*)/g;e=t.exec(r);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n},jsonSize:function(r){var e=0;for(const n in r)r.hasOwnProperty(n)&&++e;return e},valid:function(r){return null!=r},isNumber:function(r){return!isNaN(parseFloat(r))&&isFinite(r)},toTitleCase:function(r){return r=r.replace(/[_\/]/g," "),r.replace(/\w\S*/g,function(r){return r.charAt(0).toUpperCase()+r.substr(1).toLowerCase()})},getMatches:function(r,e,n){n||(n=1);for(var t,i=[];t=e.exec(r);)i.push(t[n]);return i},assert:function(r,e){if(!r){if(e=e||"Assertion failed",console.log(e),"undefined"!=typeof Error)throw new Error(e);throw e}},rgbToHex:function(r){if("#"===r.substr(0,1))return r;var e=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(r);if(!e)return r;var n=parseInt(e[2],10).toString(16),t=parseInt(e[3],10).toString(16),i=parseInt(e[4],10).toString(16);return"#"+((1==n.length?"0"+n:n)+(1==t.length?"0"+t:t)+(1==i.length?"0"+i:i))},darken:function(r,e){e<0&&(e=0);var n=r;if("#"==n.substr(0,1)&&(n=n.substring(1)),3==n.length||6==n.length){var t,i=n.length/3,a=parseInt(n.substr(0,i),16);t=e*a/(256-a),a=Math.floor(256*t/(t+1)),a=a.toString(16),1==a.length&&(a="0"+a);var o=parseInt(n.substr(i,i),16);t=e*o/(256-o),o=Math.floor(256*t/(t+1)),o=o.toString(16),1==o.length&&(o="0"+o);var s=parseInt(n.substr(2*i,i),16);t=e*s/(256-s),s=Math.floor(256*t/(t+1)),s=s.toString(16),1==s.length&&(s="0"+s),n=a+o+s}return"#"+n},isArray:r=>r&&r.constructor===Array,isPlainObject:r=>r&&r instanceof Object&&r.constructor===Object,isIterable:r=>dd.isArray(r)||dd.isPlainObject(r),appendArray:function(r,e){return dd.isArray(r)?r.push(e):r=r?[r,e]:[e],r},mergeArray:function(){for(var r=(r,e)=>e.forEach(e=>r.push(e));arguments.length>1;)r(arguments[0],arguments[1]),arguments.splice(1,1)},deleteKeys:(r,e)=>(e.forEach(e=>delete r[e]),r),indexOfKey:(r,e,n)=>{for(var t in r){var i=r[t];if(i[e]===n)return t}return-1},firstIndexOfKey:(r,e,n)=>dd.indexOfKey(r,e,n),lastIndexOfKey:function(r,e,n){var t=-1;for(var i in r){var a=r[i];a[e]===n&&(t=i)}return t},merge:function(){let r=function(r,e){if(null==r)return e;if(null==e)return r;var n=dd.copy(r);for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if(r.hasOwnProperty(t)){var a=n[t];typeof a!=typeof i||dd.isArray(a)&&!dd.isArray(i)||dd.isPlainObject(a)&&!dd.isPlainObject(i)?n[t]=dd.copy(i):dd.isArray(a)?"_reset"==i[0]?n[t]=dd.copy(i.slice(1)):n[t]=[].concat(a).concat(i):dd.isPlainObject(a)?n[t]=dd.merge(a,i):n[t]=dd.copy(i)}else n[t]=dd.copy(i)}return n},e=arguments[0];for(var n=1;n<arguments.length;n++)e=r(e,arguments[n]);return e},toObject:function(r){var e={};return e[r]={},e},firstElement:function(r){for(var e in r)if(r.hasOwnProperty(e))return[e,r[e]]},firstValue:function(r){for(var e in r)if(r.hasOwnProperty(e))return r[e]},firstKey:function(r){return this.firstElement(r)[0]},copy:function(r,e,n){n=n||1,e=e||[];let t=this;if(void 0===r||t.isAtomicValue(r))return r;let i=()=>{let e=[];return r.forEach(r=>e.push(t.copy(r))),e},a=()=>{let i={};return Object.entries(r).forEach(([a,o])=>{n>10?console.log("level 10",r,a,o):e.includes(o)||Object.is(o,r)?i[a]=o:i[a]=(e.push(o),t.copy(o,e,n+1))}),i};return t.isArray(r)?i():a()},size:function(r){var e,n=0;for(e in r)r.hasOwnProperty(e)&&n++;return n},plainValues:function(r){var e={};for(var n in r){var t=r[n];dd.isPlainObject(t)||dd.isArray(t)||(e[n]=t)}return e},replaceVars:function(r,e,n){n||(n={});var t=arguments,i=!1,a=this,o=function(r){if(!a.isAtomicValue(r))return r;var e=dd.getMatches(r,/\$(\w+)/g);return e?(e.forEach(function(e){var a,o=n.sourceFirst?0:1,s=t[o++];if(void 0!==s&&(a=s[e]),s=t[o%2],(void 0===a||a===r&&void 0!==s)&&(a=s[e]),void 0!==a){var c=r;r=r.replace(new RegExp("\\$"+e+"([^w]|\b|$)","g"),a+"$1"),i||(i=r!=c)}}),r):r},s=function(t,i){return i.forEach(function(o){dd.isPlainObject(o)&&(a.replaceVars(dd.merge({},r,e),o,n),i[t]=o)}),i};do{for(var c in i=!1,e)if(!(dd.isArray(e.constants)&&e.constants.indexOf(c)>=0)){var u=e[c];dd.isArray(u)?e[c]=s(c,u):dd.isPlainObject(u)&&n.recurse?dd.replaceVars(dd.merge({},r,e),u,n):e[c]=o(u)}}while(i&&n.recurse)},each:(r,e)=>{if(dd.isArray(r))return r.forEach(e);let n=Object.entries(r);for(const[r,t]of n)e(t,r,n);return r},some:(r,e)=>{if(dd.isArray(r))return r.some(e);let n=Object.entries(r);for(const[r,t]of n)if(e(t,r,n))break;return r},replaceFields:function(r,e,n){return"string"!=typeof r?r:(dd.each(e,function(e,t){var i=n[t];void 0!==i&&(r=r.replace("$"+e,i))}),r)},replaceValues:function(r,e){for(var n in e)e.hasOwnProperty(n)&&(r=r.replace("$"+n,e[n]));return r},visible:function(r){return!(r.hide||!1===r.show)},walkTree:function(r,e,n){void 0===n&&(n=0),dd.each(r,function(t,i){e(t,i,r,n),(dd.isArray(t)||dd.isPlainObject(t))&&this.walkTree(t,e,n+1)})},hasFlag:function(r,e){return r.indexOf(e)>=0},toIntValue:function(r,e){if(!(e in r))return!1;var n=r[e];return n=""==n?0:parseInt(n),!isNaN(n)&&(r[e]=n,!0)},getCSS:function(r){return this.loadLink(r,"css")},isNumeric:r=>null!==r&&!isNaN(r),escapeHtml:function(r,e,n){var t=r;if(e){if("string"==typeof e&&(e=e.split(" ")),dd.isNumeric(e[0])&&0==parseInt(e[0]))return t;e.map(function(r){t=t.replace(new RegExp("<(/?)"+r+"(/?)>","g"),"~~~$1"+r+"$2~~~")})}if(n)"string"==typeof n&&(n=n.split(" ")),n.map(function(r){t=t.replace(new RegExp("<(/?)"+r+"(/?)>","g"),"&lt;$1"+r+"$2&gt;")});else{var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};t=t.replace(/[&<>"']/g,function(r){return i[r]})}return e&&e.map(function(r){t=t.replace(new RegExp("~~~(/?)"+r+"(/?)~~~","g"),"<$1"+r+"$2>")}),t},isAtomicValue:function(r){return"string"==typeof r||void 0===r||!isNaN(r)},removeXSS:function(r){var e=/<script(?:\s+[^>]*)?>.*<\/script>/,n=function(r){var t=!1;for(var i in r){var a,o=r[i];if(dd.isArray(o)||dd.isPlainObject(o))n(r[i]);else if("string"==typeof o&&(a=o.search(e))>=0){var s=o.match(e);r[i]=o.substr(0,a)+dd.escapeHtml(s[0])+o.substr(a+s[0].length),t=!0}}t&&n(r)};n(r)},debounce:function(r,e,n){var t;return function(){var i=this,a=arguments,o=function(){t=null,n||r.apply(i,a)},s=n&&!t;clearTimeout(t),t=setTimeout(o,e),s&&r.apply(i,a)}},selector:{id:function(r){return"#"+r},idName:function(r){return"#?,[name='?']".replace("?",r)},name:function(r){return"[name='?']".replace("?",r)},attr:function(r,e){return"$name='$value']".replace("$name",r).replace("$value",e)}},forEachMatch:(r,e,n)=>{for(var t,i=0;(t=r.exec(e))&&!1!==n(t,i++););},extend:(r,e)=>dd.isArray(r)?r.concat(e):dd.merge(r,e),asArray:r=>null==r?[]:dd.isArray(r)?r:[r]};void 0!==r.didi&&void 0!==r.dd||(r.didi=r.dd=e)})(window);